# Genie Simulation Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# Common Configuration (used by both standard and cached load tests)
# =============================================================================

# Genie space ID (required)
GENIE_SPACE_ID=your-space-id

# Fully-qualified paths to system tables (3-part: catalog.schema.table)
# Default to standard Databricks system table locations
# Override when system tables are exposed via views in a different catalog/schema
# Example for custom views: line8.databricks_system.history / line8.databricks_system.audit
SYSTEM_QUERY_HISTORY_TABLE=system.query.history
SYSTEM_ACCESS_AUDIT_TABLE=system.access.audit

# Path to conversations YAML file (relative to notebooks directory)
GENIE_CONVERSATIONS_FILE=../conversations.yaml

# Wait time between messages (seconds)
GENIE_MIN_WAIT=8
GENIE_MAX_WAIT=30

# Sampling configuration (optional)
# Number of conversations to sample and reuse during simulation
GENIE_SAMPLE_SIZE=
# Random seed for reproducible sampling
GENIE_SAMPLE_SEED=

# =============================================================================
# Cache Service Configuration (used by locustfile_cached.py only)
# =============================================================================

# Lakebase authentication for cache service
GENIE_LAKEBASE_CLIENT_ID=your-client-id
GENIE_LAKEBASE_CLIENT_SECRET=your-client-secret

# Lakebase instance name for semantic cache storage
GENIE_LAKEBASE_INSTANCE=retail-consumer-goods

# Warehouse ID for cache operations
GENIE_WAREHOUSE_ID=your-warehouse-id

# Cache TTL in seconds (default: 86400 = 24 hours)
GENIE_CACHE_TTL=86400

# Semantic similarity threshold for cache hits (0.0-1.0, default: 0.85)
GENIE_SIMILARITY_THRESHOLD=0.85

# LRU cache capacity (number of entries, default: 100)
GENIE_LRU_CAPACITY=100

# =============================================================================
# In-Memory Semantic Cache Configuration (used by locustfile_in_memory_semantic.py)
# =============================================================================
# This cache does not require PostgreSQL or Lakebase - all storage is in memory
# Only requires warehouse ID for SQL execution

# Warehouse ID for cache operations (required)
# GENIE_WAREHOUSE_ID=your-warehouse-id  # Already defined above

# Cache capacity - maximum number of entries before LRU eviction (default: 1000)
# Memory usage estimate: ~200KB per 1000 entries with default embedding model
GENIE_CACHE_CAPACITY=1000

# Context window size - number of previous conversation turns to include (default: 3)
GENIE_CONTEXT_WINDOW_SIZE=3

# Context similarity threshold for cache hits (0.0-1.0, default: 0.80)
GENIE_CONTEXT_SIMILARITY_THRESHOLD=0.80

# Embedding model name (default: databricks-gte-large-en)
GENIE_EMBEDDING_MODEL=databricks-gte-large-en

# Optional L1 LRU cache capacity (default: 100, set to 0 to disable)
# GENIE_LRU_CAPACITY=100  # Already defined above

# Cache TTL in seconds (default: 86400 = 24 hours)
# GENIE_CACHE_TTL=86400  # Already defined above

# Similarity threshold (default: 0.85)
# GENIE_SIMILARITY_THRESHOLD=0.85  # Already defined above
